jQuery(document).ready(function(t){var a=function(){var a=t('input[name="stockticker_defaults[all_symbols]"]').val().toString().split(",").length*t('input[name="stockticker_defaults[timeout]"]').val()*1.5;t("#fetch_timeout_advisor .min").html(Math.ceil(a))};t('input[name="stockticker_defaults[cache_timeout]"]').after('&nbsp;<span id="fetch_timeout_advisor">at least <span class="min"></span></span>'),a(),t('input[name="stockticker_defaults[timeout]"], input[name="stockticker_defaults[all_symbols]"]').on("change click keydown",function(t){a()}),t('button[name="st_force_data_fetch_stop"]').on("click",function(a){a.preventDefault(),t(this).data("stop","true")}),t('button[name="st_force_data_fetch"]').on("click",function(a){a.preventDefault();var e=this,s=t('button[name="st_force_data_fetch_stop"]');t(e).prop("disabled",!0),t(s).addClass("enabled"),t.ajax({type:"post",dataType:"json",async:!0,url:stockTickerJs.ajax_url,data:{action:"stockticker_purge_cache"}}).done(function(a){function n(){t.ajax({type:"post",dataType:"json",async:!0,url:stockTickerJs.ajax_url,data:{action:"stockticker_update_quotes"}}).done(function(a){a.done||"true"==t(s).data("stop")?("DONE"!=a.message?t(".st_force_data_fetch").append("<br />["+a.symbol+"] "+a.message):t(".st_force_data_fetch").append("<br />DONE"),t(e).prop("disabled",!1),t(s).removeClass("enabled").data("stop","false")):(a.message.indexOf("Operation timed out")>=0?t(".st_force_data_fetch").append("[Timeout] "+a.symbol+"<br />"):a.message.indexOf("Invalid API call")>=0?t(".st_force_data_fetch").append("[Invalid API call] "+a.symbol+' (<a href="'+stockTickerJs.avurl+a.symbol+'" target="_blank">test</a>)<br />'):t(".st_force_data_fetch").append("[OK] "+a.symbol+"<br />"),setTimeout(function(){n()},2e3))}).fail(function(a){t(".st_force_data_fetch").append("<br />[Error] "+a.message)})}t(".st_force_data_fetch").html("Reset fetching loop and fetch data again. Please wait...<br /><br />"),n()})})});