jQuery(document).ready(function(t){t('button[name="st_force_data_fetch_stop"]').on("click",function(a){a.preventDefault(),t(this).data("stop","true")}),t('button[name="st_force_data_fetch"]').on("click",function(a){a.preventDefault();var e=this,o=t('button[name="st_force_data_fetch_stop"]');t(e).prop("disabled",!0),t(o).addClass("enabled"),t.ajax({type:"post",dataType:"json",async:!0,url:stockTickerJs.ajax_url,data:{action:"stockticker_purge_cache"}}).done(function(a){function s(){t.ajax({type:"post",dataType:"json",async:!0,url:stockTickerJs.ajax_url,data:{action:"stockticker_update_quotes"}}).done(function(a){a.done||"true"==t(o).data("stop")?("DONE"!=a.message?t(".st_force_data_fetch").append("<br />["+a.symbol+"] "+a.message):t(".st_force_data_fetch").append("<br />DONE"),t(e).prop("disabled",!1),t(o).removeClass("enabled").data("stop","false")):(a.message.indexOf("Operation timed out")>=0?t(".st_force_data_fetch").append("[Timeout] "+a.symbol+"<br />"):a.message.indexOf("Invalid API call")>=0?t(".st_force_data_fetch").append("[Invalid API call] "+a.symbol+' (<a href="'+stockTickerJs.avurl+a.symbol+'" target="_blank">test</a>)<br />'):t(".st_force_data_fetch").append("[OK] "+a.symbol+"<br />"),setTimeout(function(){s()},2e3))}).fail(function(a){t(".st_force_data_fetch").append("<br />[Error] "+a.message)})}t(".st_force_data_fetch").html("Reset fetching loop and fetch data again. Please wait...<br /><br />"),s()})})});